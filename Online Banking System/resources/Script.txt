CREATE TABLE BANK_ADMIN(
  ADMIN_NAME VARCHAR2(15) PRIMARY KEY,
  PASSWORD VARCHAR2(15)
);

create sequence ACCOUNT_ID_SEQ
start with 1000000000;

CREATE TABLE ACCOUNT_MASTER(
ACCOUNT_ID NUMBER(10) PRIMARY KEY,
ACCOUNT_TYPE VARCHAR2(25),
ACCOUNT_BALANCE NUMBER(15),
OPEN_DATE DATE
);

CREATE TABLE USER_TABLE(
ACCOUNT_ID NUMBER(10) NOT NULL, 
USERNAME VARCHAR2(15) NOT NULL,
PASSWORD VARCHAR2(15) NOT NULL,
SECRET_QUESTION VARCHAR2(50),
SECRET_ANSWER VARCHAR2(15),
TRANSACTION_PASSWORD VARCHAR2(15) NOT NULL,
LOCK_STATUS VARCHAR2(1) DEFAULT 'N' constraint LOCK_CONSTRAINT check (LOCK_STATUS in ('N', 'L')),
CONSTRAINT FK_ACCOUNT_ID_USER FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT_MASTER(ACCOUNT_ID)
);
drop table USER_TABLE;

CREATE TABLE CUSTOMER(
ACCOUNT_ID NUMBER(10) NOT NULL UNIQUE,
CUSTOMER_NAME VARCHAR2(50) NOT NULL,
MOBILE_NO VARCHAR2(10) NOT NULL,
EMAIL VARCHAR2(30) NOT NULL,
ADDRESS VARCHAR2(100) NOT NULL,
PANCARD VARCHAR2(15) NOT NULL,
CONSTRAINT FK_ACCOUNT_ID FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT_MASTER(ACCOUNT_ID)
);
DROP TABLE CUSTOMER;
CREATE TABLE TRANSACTIONS(
  TRANSACTION_ID NUMBER(10),
  TRAN_DESCRIPTION VARCHAR2(100),
  TRANSACTION_DATE DATE,
  TRANSACTION_TYPE VARCHAR2(6) constraint TYPE_CONSTRAINT check (TRANSACTION_TYPE in ('credit', 'debit')),
  TRAN_AMOUNT NUMBER(15),
  ACCOUNT_ID NUMBER(10) NOT NULL,
  CONSTRAINT FK_TRANS_ACCOUNT_ID FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT_MASTER(ACCOUNT_ID)
);
drop table TRANSACTIONS;
CREATE SEQUENCE TRANSACTION_ID_SEQ
START WITH 1000;

CREATE TABLE FUND_TRANSFER(
  FUNDTRANSFER_ID NUMBER(10) PRIMARY KEY,
  ACCOUNT_ID NUMBER(10) NOT NULL,
  PAYEE_ACCOUNT_ID NUMBER(10) NOT NULL,
  DATE_OF_TRANSFER DATE,
  TRANSFER_AMOUNT NUMBER(15),
  CONSTRAINT FK_FUNDTRANS_ACCOUNT_ID FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT_MASTER(ACCOUNT_ID)
);

CREATE SEQUENCE FUNDTRANSFER_ID_SEQ
START WITH 1000;

drop table FUND_TRANSFER;

CREATE TABLE PAYEE_TABLE(
  ACCOUNT_ID NUMBER(10) NOT NULL,
  PAYEE_ACCOUNT_ID NUMBER(10) NOT NULL,
  NICK_NAME VARCHAR2(40) NOT NULL,
  CONSTRAINT FK_PAYEETABLE_ACCOUNT_ID FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT_MASTER(ACCOUNT_ID),
  CONSTRAINT FK_PAYEE_ACCOUNT_ID FOREIGN KEY (PAYEE_ACCOUNT_ID) REFERENCES ACCOUNT_MASTER(ACCOUNT_ID)
);
DROP TABLE PAYEE_TABLE;

CREATE TABLE SERVICE_TRACKER(
SERVICE_ID NUMBER(10) PRIMARY KEY,
SERVICE_DESC VARCHAR2(25),
ACCOUNT_ID NUMBER(15),
RAISE_DATE DATE,
SERVICE_STATUS VARCHAR2(10),
CONSTRAINT FK_SERVICE_ACCOUNT_ID FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT_MASTER(ACCOUNT_ID)
);

CREATE SEQUENCE SERVICE_ID_SEQ
START WITH 1000;
COMMIT;
